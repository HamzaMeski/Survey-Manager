<div class="w-full bg-gray-900">
  <!-- Subject Item -->
  <div
    [style.padding-left]="paddingLeft"
    class="flex items-center py-2 px-2 cursor-pointer group"
    (click)="onSelect($event)">

    <!-- add subject -->
    <button
      *ngIf="hasSubSubjects"
      (click)="toggleExpand($event)"
      class="w-6 h-6 flex items-center justify-center rounded-full bg-red-500 hover:bg-gray-700">
        <i class="fa-solid fa-plus text-white"></i>
    </button>

    <!-- Expand/Collapse Icon -->
    <button
      *ngIf="hasSubSubjects"
      (click)="toggleExpand($event)"
      class="w-6 h-6 flex items-center justify-center mr-2 rounded hover:bg-gray-700">
      <svg
        [class.rotate-90]="isExpanded"
        class="w-4 h-4 transition-transform duration-200 text-green-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"/>
      </svg>
    </button>

    <!-- Subject Info -->
    <div class="flex-1 text-gray-100">
      <div class="font-medium">{{subject.title}}</div>
      <div class="text-sm text-gray-400">{{subject.description}}</div>
    </div>

    <!-- Level Indicator -->
    <div *ngIf="isLastLevel"
         class="ml-2 px-2 py-1 text-xs bg-green-800 text-green-100 rounded-full">
      Has Questions
    </div>
  </div>

  <!-- Recursive Sub-subjects -->
  <div *ngIf="hasSubSubjects && isExpanded"
       class="transition-all duration-200"
       [class.opacity-100]="isExpanded"
       [class.opacity-0]="!isExpanded">
    <app-subject-tree-item
      *ngFor="let subSubject of subject.subSubjects"
      [subject]="subSubject"
      [level]="level + 1"
      (select)="select.emit($event)">
    </app-subject-tree-item>
  </div>
</div>

